<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="QPWONSpin: Sales discovery tool con SPIN, SmartMatch, esportazione e integrazione CRM">

  <!-- PWA Manifest -->
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#00A89D">

  <title>QPWONSpin Â· Sales Discovery</title>

  <!-- Font & CSS Variables -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">

  <!-- Service Worker -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js');
      });
    }
  </script>
</head>

<body class="app" aria-live="polite">
  <!-- Onboarding Wizard -->
  <div id="onboardingModal" class="modal" hidden>
    <div class="modal__content">
      <h2>Benvenuto in QPWONSpin</h2>
      <p>In 3 passi scoprirai come usare SPIN, il monitor di progresso e SmartMatch.</p>
      <ol>
        <li>Rispondi alle domande SPIN</li>
        <li>Controlla il Pain e Closing Score</li>
        <li>Scopri la soluzione migliore con SmartMatch</li>
      </ol>
      <button id="startOnboarding" class="btn btn--primary">Inizia</button>
    </div>
  </div>

  <!-- Header -->
  <header class="header">
    <div class="header__left">
      <button id="menuToggle" class="btn btn--icon" aria-label="Apri menu">
        <span class="icon-menu"></span>
      </button>
      <h1 class="header__title">QPWONSpin</h1>
    </div>
    <div class="header__right">
      <button id="sessionMgrBtn" class="btn btn--secondary">Sessioni</button>
      <button id="themeToggle" class="btn btn--secondary" aria-label="Cambia tema">ðŸŒ™</button>
    </div>
  </header>

  <!-- Sidebar Navigation -->
  <aside id="sidebar" class="sidebar" role="navigation">
    <nav>
      <ul class="sidebar__list">
        <li><a href="#contesto">Contesto Strategico</a></li>
        <li><a href="#spin">Domande SPIN</a></li>
        <li><a href="#smartshare">Live Share</a></li>
        <li><a href="#smartmatch">SmartMatch</a></li>
        <li><a href="#risultati">Risultati</a></li>
        <li><a href="#export">Esporta</a></li>
        <li><a href="#settings">Impostazioni</a></li>
      </ul>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="main">
    <!-- Progress Bar -->
    <div class="progress" aria-label="Progresso SPIN">
      <div class="progress__track">
        <div id="progressBar" class="progress__bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" style="height:0%;"></div>
      </div>
      <div id="progressPercent" class="progress__percent">0%</div>
    </div>

    <!-- Sezione: Contesto Strategico -->
    <section id="contesto" class="section">
      <h2>Contesto Strategico</h2>
      <label for="strategicContext" class="visually-hidden">Descrivi l'azienda</label>
      <textarea id="strategicContext" class="textarea" placeholder="Descrivi in breve l'azienda, mercato e obiettivi" required></textarea>
    </section>

    <!-- Sezione: Domande SPIN -->
    <section id="spin" class="section">
      <h2>Domande SPIN</h2>
      <div class="question-list">
        <!-- Card esempio: Situazione -->
        <div class="question-card">
          <h3>Situazione</h3>
          <label for="situation1">1. Qual Ã¨ la sua situazione attuale?</label>
          <input id="situation1" type="text" placeholder="Risposta situazione" required>
        </div>
        <div class="question-card">
          <h3>Problema</h3>
          <label for="problem1">2. Quali problemi incontra oggi?</label>
          <input id="problem1" type="text" placeholder="Risposta problema" required>
        </div>
        <div class="question-card">
          <h3>Implicazione</h3>
          <label for="implication1">3. Cosa succede se non risolve?</label>
          <input id="implication1" type="text" placeholder="Risposta implicazione" required>
        </div>
        <div class="question-card">
          <h3>Needs-payoff</h3>
          <label for="need1">4. Quali benefici cerca?</label>
          <input id="need1" type="text" placeholder="Risposta needs-payoff" required>
        </div>
        <!-- ... altre domande SPIN fino a 8 ... -->
      </div>
    </section>

    <!-- Sezione: Live Share -->
    <section id="smartshare" class="section">
      <h2>Live Share</h2>
      <div class="live-share">
        <button id="toggleShareView" class="btn btn--tertiary">Mostra al cliente</button>
        <div id="shareView" class="share-view" hidden>
          <!-- Mostra solo risposte compilate -->
          <h3>Risposte SPIN</h3>
          <ul id="shareList"></ul>
        </div>
      </div>
    </section>

    <!-- Sezione: SmartMatch -->
    <section id="smartmatch" class="section" hidden>
      <h2>SmartMatch</h2>
      <div class="smartmatch">
        <div class="smartmatch__profile">
          <h3>Profilo consigliato</h3>
          <div id="profileName"></div>
          <div id="matchScore"></div>
        </div>
        <div class="smartmatch__details">
          <h4>Soluzione</h4>
          <p id="solutionDesc"></p>
          <h4>Benefici chiave</h4>
          <ul id="benefitsList"></ul>
          <h4>Azioni consigliate</h4>
          <ul id="actionsList"></ul>
        </div>
      </div>
    </section>

    <!-- Sezione: Risultati -->
    <section id="risultati" class="section">
      <h2>Risultati</h2>
      <canvas id="scoreChart" role="img" aria-label="Grafico dei punteggi Pain e Closing"></canvas>
    </section>

    <!-- Sezione: Esporta -->
    <section id="export" class="section">
      <h2>Esporta</h2>
      <div class="export-controls">
        <button id="exportExcelBtn" class="btn btn--primary">Esporta Excel</button>
        <button id="exportPdfBtn" class="btn btn--primary">Esporta PDF</button>
        <input id="logoUpload" type="file" accept="image/*" class="file-input" aria-label="Carica logo cliente per PDF">
      </div>
    </section>

    <!-- Sezione: Impostazioni & Tip -->
    <section id="settings" class="section">
      <h2>Impostazioni &amp; Tip</h2>
      <div class="settings-grid">
        <div class="setting-item">
          <label for="languageSelect">Registro Linguistico</label>
          <select id="languageSelect">
            <option value="friendly">Friendly</option>
            <option value="formal">Formale</option>
          </select>
        </div>
        <div class="setting-item">
          <label for="autoTheme">Tema Automatico</label>
          <input id="autoTheme" type="checkbox">
        </div>
      </div>
      <div class="tip-box" aria-live="assertive">
        <p id="businessTip">Tip: Ricorda di esplorare i costi nascosti del cliente!</p>
      </div>
    </section>

  </main>

  <!-- Footer -->
  <footer class="footer">
    <small>&copy; 2025 QPWON Solutions Â· <a href="/privacy">Privacy</a></small>
  </footer>

  <!-- Scripts -->
  <script type="module" src="script.js"></script>
</body>
</html>
