<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="QPWONSpinMatch: Discovery & SmartMatch Tool">

  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#00A89D">

  <title>QPWONSpinMatch ¬∑ Sales Discovery</title>

  <!-- Fonts & CSS -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>

<body class="app">
  <!-- Onboarding Modal -->
  <div id="onboardingModal" class="modal">
    <div class="modal__content">
      <!-- Step 1 -->
      <div class="onboarding-step" data-step="1">
        <h2>Benvenuto in QPWONSpinMatch</h2>
        <p>Questo strumento ti guider√† passo passo attraverso la discovery method.</p>
      </div>
      <!-- Step 2 -->
      <div class="onboarding-step" data-step="2" hidden>
        <h2>Raccogli il Contesto</h2>
        <p>Inserisci informazioni su ambulatori, medici e obiettivi della struttura.</p>
      </div>
      <!-- Step 3 -->
      <div class="onboarding-step" data-step="3" hidden>
        <h2>Completa le domande SPIN</h2>
        <p>Rispondi in modo esaustivo alle domande di Situazione, Problema, Implicazione e Need/Benefit.</p>
      </div>
      <!-- Step 4 -->
      <div class="onboarding-step" data-step="4" hidden>
        <h2>Scopri il tuo SmartMatch</h2>
        <p>Al termine vedrai il profilo consigliato, benefici attesi e prossime azioni.</p>
      </div>
      <!-- Footer con navigazione step -->
      <div class="modal-footer">
        <button id="prevStepBtn" class="btn btn--tertiary">Indietro</button>
        <button id="nextStepBtn" class="btn btn--primary">Avanti</button>
      </div>
    </div>
  </div>

  <!-- Status & Admin Controls -->
  <div class="onboarding-status">
    <span id="onboardingStatus">üöß Onboarding in corso</span>
    <button id="adminRiapri" class="btn btn--secondary">üîÅ Riapri Onboarding</button>
  </div>

  <!-- Header -->
  <header class="header">
    <div class="header__title">QPWONSpinMatch</div>
  </header>

  <!-- Sidebar -->
  <aside id="sidebar" class="sidebar">
    <nav>
      <ul>
        <li><a href="#contesto">Contesto Strategico</a></li>
        <li><a href="#spin">Domande SPIN</a></li>
        <li><a href="#smartshare">Live Share</a></li>
        <li><a href="#smartmatch">SmartMatch</a></li>
        <li><a href="#risultati">Risultati</a></li>
        <li><a href="#export">Esporta</a></li>
        <li><a href="#settings">Impostazioni</a></li>
      </ul>
    </nav>
  </aside>

  <!-- Main -->
  <main class="main">
    <!-- Progress Bar -->
    <section class="section progress-section">
      <h2>Progresso SPIN</h2>
      <div class="progress" aria-label="Progresso SPIN">
        <div class="progress__track">
          <div id="progressBar" class="progress__bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" style="height:0%"></div>
        </div>
        <div id="progressPercent" class="progress__percent">0%</div>
      </div>
    </section>

    <!-- Contesto Strategico -->
    <section id="contesto" class="section">
      <h2>Contesto Strategico</h2>
      <textarea id="strategicContext" placeholder="Es. 5 ambulatori, 18 medici, desiderio di crescita..." required></textarea>
    </section>

    <!-- Domande SPIN -->
    <section id="spin" class="section">
      <h2>Domande SPIN</h2>
      <div class="question-list">
        <!-- Situazione -->
        <div class="question-card">
          <h3>Situazione</h3>
          <label for="situation1">1. Qual √® la sua situazione attuale?</label>
          <input id="situation1" data-score="0" placeholder="Descrivi la situazione" required>
        </div>
        <!-- Problema -->
        <div class="question-card">
          <h3>Problema</h3>
          <label for="problem1">2. Quali problemi incontra?</label>
          <input id="problem1" data-score="0" placeholder="Descrivi il problema" required>
        </div>
        <!-- Implicazione -->
        <div class="question-card">
          <h3>Implicazione</h3>
          <label for="implication1">3. Cosa succede se non risolve?</label>
          <input id="implication1" data-score="0" placeholder="Descrivi l'implicazione" required>
        </div>
        <!-- Need/Benefit -->
        <div class="question-card">
          <h3>Need/Benefit</h3>
          <label for="need1">4. Quali benefici cerca?</label>
          <input id="need1" data-score="0" placeholder="Descrivi il beneficio" required>
        </div>
      </div>
    </section>

    <!-- Live Share -->
    <section id="smartshare" class="section">
      <h2>Live Share</h2>
      <button id="toggleShareView" class="btn btn--tertiary">Mostra al cliente</button>
      <div id="shareView" class="share-view" hidden>
        <ul id="shareList"></ul>
      </div>
    </section>

    <!-- SmartMatch -->
    <section id="smartmatch" class="section" hidden>
      <h2>SmartMatch</h2>
      <div class="smartmatch">
        <div class="smartmatch__profile">
          <h3>Profilo consigliato</h3>
          <div id="profileName"></div>
          <div id="matchScore"></div>
        </div>
        <div class="smartmatch__details">
          <h4>Soluzione</h4>
          <p id="solutionDesc"></p>
          <h4>Benefici attesi</h4>
          <ul id="benefitsList"></ul>
          <h4>Azioni suggerite</h4>
          <ul id="actionsList"></ul>
        </div>
      </div>
    </section>

    <!-- Risultati (Grafico) -->
    <section id="risultati" class="section">
      <h2>Risultati</h2>
      <canvas id="scoreChart" role="img" aria-label="Grafico punteggi"></canvas>
    </section>

    <!-- Esporta -->
    <section id="export" class="section">
      <h2>Esporta</h2>
      <button id="exportExcelBtn" class="btn btn--primary">Esporta Excel</button>
      <button id="exportPdfBtn" class="btn btn--primary">Esporta PDF</button>
      <input id="logoUpload" type="file" accept="image/*">
    </section>

    <!-- Impostazioni -->
    <section id="settings" class="section">
      <h2>Impostazioni & Tip</h2>
      <label><input id="autoTheme" type="checkbox"> Tema automatico</label>
      <label><input id="themeToggle" type="button" value="Cambia tema"></label>
    </section>

  </main>

  <!-- Footer -->
  <footer class="footer">
    &copy; 2025 QPWON Solutions
  </footer>

  <!-- Librerie esterne -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <!-- JS Principale -->
  <script type="module" src="script.js" defer></script>
</body>
</html>
