/* ==========================================================================
   QPWON SpinMatch — style.css (clean full rewrite)
   ========================================================================== */

/* ===== Reset & base ===== */
* { box-sizing: border-box; }
html, body { height: 100%; }
html { scroll-behavior: smooth; }
body {
  margin: 0;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color: #111827;                 /* gray-900 */
  background: #f8fafc;            /* slate-50 */
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}

/* ===== Vars ===== */
:root{
  --primary: #2563eb;             /* blue-600 */
  --primary-700: #1d4ed8;         /* blue-700 */
  --muted: #6b7280;               /* gray-500 */
  --border: #e5e7eb;              /* gray-200 */
  --card: #ffffff;
  --bg-soft: #f1f5f9;             /* slate-100 */
  --radius: 12px;
  --shadow-sm: 0 1px 2px rgba(0,0,0,.06);
  --shadow-md: 0 4px 12px rgba(0,0,0,.08);
  --shadow-lg: 0 10px 25px rgba(0,0,0,.12);
  --focus: 0 0 0 3px rgba(37,99,235,.35);
}

/* ===== Helpers ===== */
.hidden { display: none !important; }

/* A11y */
.sr-only {
  position: absolute!important;
  width: 1px!important; height: 1px!important;
  padding: 0!important; margin: -1px!important;
  overflow: hidden!important; clip: rect(0,0,1px,1px)!important;
  white-space: nowrap!important; border: 0!important;
}
.sr-only-focusable:focus {
  position: static!important; width: auto!important; height: auto!important;
  margin: 0!important; overflow: visible!important; clip: auto!important;
  white-space: normal!important;
}
:where(button, [href], input, select, textarea) { outline: none; }
:where(button, [href], input, select, textarea):focus-visible {
  box-shadow: var(--focus);
  border-radius: 10px;
}

/* ===== Header ===== */
.header{
  display:flex; align-items:center; justify-content:space-between;
  gap:16px; padding:14px 22px;
  background: var(--primary); color:#fff;
  position: sticky; top: 0; z-index: 50;
  box-shadow: var(--shadow-md);
}
.header-left{ display:flex; align-items:center; gap:12px; }
.header-right{ display:flex; align-items:center; gap:10px; }
.app-title{ margin:0; font-size:1.25rem; font-weight:700; letter-spacing:.2px; }

/* ===== Buttons ===== */
.btn-primary, .btn-secondary, .btn-tertiary{
  font-weight:600; font-size:.95rem;
  padding:10px 14px; border-radius:10px;
  border:1px solid transparent; cursor:pointer;
  transition: transform .06s ease, box-shadow .2s ease,
              background .2s ease, color .2s ease, border-color .2s ease;
  will-change: transform;
}
.btn-primary{ background: var(--primary); color:#fff; box-shadow: var(--shadow-sm); }
.btn-primary:hover{ background: var(--primary-700); }
.btn-primary:active{ transform: translateY(1px); }

.btn-secondary{ background:#fff; color: var(--primary); border-color: var(--primary); }
.btn-secondary:hover{ background: var(--primary); color:#fff; }
.btn-secondary:active{ transform: translateY(1px); }

.btn-tertiary{ background: rgba(255,255,255,.15); color:#fff; border-color: rgba(255,255,255,.25); }
.btn-tertiary:hover{ background: rgba(255,255,255,.25); }

/* ===== Lead pill / badge ===== */
.lead-pill{
  display:inline-flex; align-items:center; gap:8px;
  padding:6px 10px; border:1.5px solid currentColor;
  border-radius:999px; font-weight:700; font-size:.9rem;
  background: rgba(255,255,255,.12);
}
.lead-badge-row{ margin-bottom:10px; }
.lead-badge{
  display:inline-block; padding:8px 12px;
  border:1.5px solid var(--border); border-radius:999px;
  font-weight:700; font-size:.9rem; background: var(--bg-soft); color:#374151;
}

/* ===== Layout ===== */
.main{
  display:grid; grid-template-columns: 240px 1fr 380px;
  gap:0; height: calc(100vh - 60px);
}

/* ===== Sidebar ===== */
.sidebar{
  background: var(--card);
  border-right: 1px solid var(--border);
  padding: 16px;
  overflow: auto;
}
.sidebar nav ul{ list-style:none; padding:0; margin:0; }
.sidebar nav li + li{ margin-top:8px; }

.step-link{
  position: relative;
  width:100%; text-align:left;
  background: transparent; border:1px solid transparent;
  color:#111827; padding:12px 14px 12px 22px;
  border-radius:10px; cursor:pointer;
}
.step-link:hover{ background: var(--bg-soft); }

/* Barretta verticale attiva (scroll-spy) */
.step-link::before{
  content:""; position:absolute; left:8px; top:8px; bottom:8px;
  width:3px; border-radius:3px; background: transparent;
  transform: scaleY(0); transform-origin: top;
  transition: transform .18s ease, background .18s ease;
}
.step-link.active::before,
.step-link[aria-current="true"]::before{
  background: var(--primary); transform: scaleY(1);
}
.step-link:hover::before{
  background: rgba(37,99,235,.35); transform: scaleY(1);
}
.step-link.active{
  background: #e8eefc; border-color:#c7d2fe; font-weight:700;
}

/* ===== Pannello centrale (scroller) ===== */
.form-section{
  background: var(--card);
  padding: 22px;
  overflow: auto;                 /* importante: è lo scroller centrale */
}
.form-hint{ margin:0 0 8px 0; color: var(--muted); font-size:.9rem; }
form{ max-width: 1000px; margin: 0 auto; }

fieldset{
  border:0; padding:0; margin:0 0 28px 0;
  scroll-margin-top: 12px;
}
legend{ font-size:1.15rem; font-weight:700; color:#0f172a; margin-bottom:12px; }

.form-grid{ display:grid; grid-template-columns: 1fr 1fr; gap:14px; }
.form-group{ display:flex; flex-direction:column; gap:8px; }
label{ font-weight:600; color:#1f2937; }

input[type="text"], input[type="number"], input[type="tel"], input[type="email"],
select, textarea{
  width:100%; padding:10px 12px;
  border:1px solid var(--border); border-radius:10px;
  background:#fff; color:#111827;
  transition: border-color .2s ease, box-shadow .2s ease;
}
input:focus, select:focus, textarea:focus{
  border-color: var(--primary); box-shadow: var(--focus);
}

.actions-row{ margin-top:12px; display:flex; gap:10px; flex-wrap:wrap; }

/* Campi “Altro” — gruppo che appare solo quando selezioni valore 'altro' */
[id^="grp_"]{ transition: opacity .2s ease; }
[id^="grp_"].hidden{ opacity: 0; pointer-events: none; }

/* Suggerimenti (autofill) */
.autofill{
  display:grid; grid-template-columns: 1fr 1fr;
  gap:12px; margin:12px 0 14px 0;
}
.suggerimento-box{
  background: var(--bg-soft);
  border:1px solid var(--border);
  border-radius:12px;
  padding:10px;
}
.suggerimento-box p{
  margin:0 0 8px 0; font-weight:600; font-size:.95rem;
}

/* ===== Match summary / Output ===== */
.match-summary{
  background: var(--card);
  border-left: 1px solid var(--border);
  padding: 16px;
  overflow: auto;
}
.match-summary h3{
  margin:4px 0 14px 0; font-size:1.1rem; font-weight:800;
}
.card{
  background:#fff; border:1px solid var(--border);
  border-radius:14px; box-shadow: var(--shadow-sm);
  padding:14px;
}
.result-card{ margin-bottom:14px; }
.result-item{ font-size:.95rem; margin:8px 0; }
.result-item strong{ color:#0f172a; }
.emph{ font-weight:800; }

/* 3 case study */
#caseStudyCard{ margin-top: 12px; }
#caseStudyGrid{
  display:grid; grid-template-columns: 1fr; gap:10px;
}

/* Grafici */
.charts{ display:grid; grid-template-columns: 1fr; gap:14px; margin:10px 0 14px 0; }
.chart-block{
  background:#fff; border:1px solid var(--border);
  border-radius:14px; padding:12px;
}
.chart-title{ margin:0 0 8px 0; font-size:.95rem; color:#1f2937; }
canvas{ width:100%!important; height:auto!important; display:block; }

/* Prossimi passi */
#nextSteps{ margin-top: 12px; }
#nextStepsList p{ margin: 8px 0; }

/* Export / azioni */
.export-btns{
  display:grid; grid-template-columns: 1fr;
  gap:8px; margin-top:8px;
}

/* Survey result badge */
.survey-result{
  background: var(--bg-soft);
  padding:10px 12px;
  border-left:4px solid var(--primary);
  border-radius:12px;
  margin-top:12px;
  font-weight:600;
}

/* ===== Toast ===== */
.toast-container{
  position: fixed; right:16px; bottom:16px;
  z-index: 60; display:grid; gap:8px;
}
.toast{
  background:#111827; color:#fff; border-radius:12px;
  padding:10px 12px; box-shadow: var(--shadow-md);
  opacity:0; transform: translateY(8px);
  transition: opacity .25s ease, transform .25s ease;
}
.toast.show{ opacity:1; transform: translateY(0); }

/* ===== Onboarding ===== */
.onboarding{
  position: fixed; inset: 0; z-index: 70;
  background: rgba(15,23,42,.58);
  backdrop-filter: blur(2px);
  display:grid; place-items:center;
}
.onboarding.hidden{ display:none; }
.onboarding-content{
  width:min(680px, 92vw);
  background:#fff; border:1px solid var(--border);
  border-radius:18px; box-shadow: var(--shadow-lg);
  padding:18px 18px 14px 18px;
}
.onboarding-content h3{ margin:0 0 8px 0; font-size:1.15rem; }
.onboarding-steps{ margin:0 0 12px 18px; padding:0; }
.onboarding-steps li{ margin:6px 0; color:#1f2937; }
.onboarding-actions{ display:flex; align-items:center; gap:10px; margin-top:8px; }
.checkbox{ font-size:.95rem; color:#374151; }
.spacer{ flex:1; }
.onboarding-dots{
  display:flex; gap:8px; align-items:center; justify-content:center; margin-top:12px;
}
.onboarding-dots .dot{
  width:10px; height:10px; border-radius:999px; background:#e5e7eb; border:none; cursor:pointer;
}
.onboarding-dots .dot.active{ background: var(--primary); }

/* ===== Animations ===== */
.fade-in{ animation: fadeIn .35s ease both; }
.fade-out{ animation: fadeOut .25s ease both; }
.pulse{ animation: pulse .6s ease; }

@keyframes fadeIn{
  from{ opacity:0; transform: translateY(4px); }
  to  { opacity:1; transform: translateY(0); }
}
@keyframes fadeOut{
  from{ opacity:1; transform: translateY(0); }
  to  { opacity:0; transform: translateY(4px); }
}
@keyframes pulse{
  0%  { box-shadow: 0 0 0 0 rgba(37,99,235,.35); }
  100%{ box-shadow: 0 0 0 14px rgba(37,99,235,0); }
}

/* Riduci movimento */
@media (prefers-reduced-motion: reduce){
  * { animation: none!important; transition: none!important; }
}

/* ===== Responsive ===== */
@media (max-width: 1280px){
  .main{ grid-template-columns: 220px 1fr; }
  .match-summary{ display:none; }
}
@media (max-width: 900px){
  .form-grid, .autofill{ grid-template-columns: 1fr; }
}
@media (max-width: 768px){
  .main{ grid-template-columns: 1fr; height:auto; min-height: calc(100vh - 60px); }
  .sidebar{ display:none; }
  .match-summary{ display:block; border-left:none; border-top:1px solid var(--border); }
  .header{ position: sticky; }
}

/* ===== Links ===== */
a { color: var(--primary); text-decoration: none; }
a:hover { text-decoration: underline; }

/* Fine file */
